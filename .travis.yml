language: generic

sudo: required

branches:
  only:
    - master

matrix:
  include:
    - os: linux
      dist: trusty
      compiler: gcc
    
before_install:
  - wget -q https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.tar.gz --no-check-certificate;
  - tar -xzf cmake-3.5.2-Linux-x86_64.tar.gz;
  - sudo ln -f -s ./cmake-3.5.2-Linux-x86_64/bin/cmake /usr/local/bin/cmake
  - sudo apt-get update -qq;
  - sudo apt-get install -qq libboost-dev libboost-test-dev libeigen3-dev libtbb-dev python3-dev python3-numpy;

before_script:
  - cmake -DWARNINGS_AS_ERRORS=ON -DBUILD_TESTING=ON -DPYTHON_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython3.4m.so -DPYTHON_INCLUDE_DIR=/usr/include/python3.4 -DPYTHON_EXECUTABLE=/usr/bin/python3;

script:
  - make -j 2;
  - ctest --output-on-failure -j 2;
    
notifications:
  email:
    on_success: change
    on_failure: always
